---
title: 關於 WSL 2
description: 關於 WSL 2 的新架構，適用於 Linux 的 Windows 子系統
keywords: 安裝 BashOnWindows、 bash、 wsl、 wsl2、 windows、 linux、 windowssubsystem、 ubuntu、 debian、 suse、 windows 10 的 windows 子系統
author: mscraigloewen
ms.author: mscraigloewen
ms.date: 05/30/2019
ms.topic: article
ms.assetid: 7afaeacf-435a-4e58-bff0-a9f0d75b8a51
ms.custom: seodec18
ms.openlocfilehash: b3b0b1ce0f55fed0b4cf223ccc18a509dcf81788
ms.sourcegitcommit: bb88269eb37405192625fa81ff91162393fb491f
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/12/2019
ms.locfileid: "67038128"
---
<span data-ttu-id="efcbf-104">WSL 2 是支援的 Windows 子系統，適用於執行 ELF64 Linux 二進位檔在 Windows 上的 Linux 架構的新版本。</span><span class="sxs-lookup"><span data-stu-id="efcbf-104">WSL 2 is a new version of the architecture that powers the Windows Subsystem for Linux to run ELF64 Linux binaries on Windows.</span></span> <span data-ttu-id="efcbf-105">其主要的目標是要增加檔案系統的效能，以及新增完整的系統呼叫相容性。</span><span class="sxs-lookup"><span data-stu-id="efcbf-105">Its primary goals are to increase file system performance, as well as adding full system call compatibility.</span></span> <span data-ttu-id="efcbf-106">這個新架構變更這些 Linux 二進位檔與 Windows 電腦的硬體互動的方式，但仍會提供相同的使用者體驗，如 WSL 1 （目前廣泛使用的版本） 所示。</span><span class="sxs-lookup"><span data-stu-id="efcbf-106">This new architecture changes how these Linux binaries interact with Windows and your computer’s hardware, but still provides the same user experience as in WSL 1 (the current widely available version).</span></span> <span data-ttu-id="efcbf-107">個別的 Linux 散發版本可以執行，WSL 1 的散發版本，或是 WSL 2 的散發版本，可以升級或降級任何時候，而且您可以執行 WSL 1 和 WSL 2 的散發版本並存。</span><span class="sxs-lookup"><span data-stu-id="efcbf-107">Individual Linux distros can be run either as a WSL 1 distro, or as a WSL 2 distro, can be upgraded or downgraded at any time, and you can run WSL 1 and WSL 2 distros side by side.</span></span> <span data-ttu-id="efcbf-108">WSL 2 使用全新的架構，會使用實際的 Linux 核心。</span><span class="sxs-lookup"><span data-stu-id="efcbf-108">WSL 2 uses an entirely new architecture that uses a real Linux kernel.</span></span>

## <a name="linux-kernel-in-wsl-2"></a><span data-ttu-id="efcbf-109">在 WSL 2 中的 Linux 核心</span><span class="sxs-lookup"><span data-stu-id="efcbf-109">Linux kernel in WSL 2</span></span>

<span data-ttu-id="efcbf-110">在 WSL 2 中的 Linux 核心已內建家中從最新的穩定分支，根據在 kernel.org 中可用的來源。此核心已特別調整 WSL 2。</span><span class="sxs-lookup"><span data-stu-id="efcbf-110">The Linux kernel in WSL 2 is built in house from the latest stable branch, based on the source available at kernel.org. This kernel has been specially tuned for WSL 2.</span></span> <span data-ttu-id="efcbf-111">它已針對大小和效能，以在 Windows 上提供令人讚嘆的 Linux 體驗最佳化，並將服務透過 Windows 更新，這表示您會取得最新的安全性修正程式和核心改良功能而不需要自行管理。</span><span class="sxs-lookup"><span data-stu-id="efcbf-111">It has been optimized for size and performance to give an amazing Linux experience on Windows and will be serviced through Windows updates, which means you will get the latest security fixes and kernel improvements without needing to manage it yourself.</span></span>

<span data-ttu-id="efcbf-112">此外此核心將會開放原始碼。</span><span class="sxs-lookup"><span data-stu-id="efcbf-112">Additionally this kernel will be open source.</span></span> <span data-ttu-id="efcbf-113">您可以找到完整的原始碼 Linux kernel[此處](https://thirdpartysource.microsoft.com/download/Windows%20Subsystem%20for%20Linux%20v2/May%202019/WSLv2-Linux-Kernel-master.zip)。</span><span class="sxs-lookup"><span data-stu-id="efcbf-113">You can find the full source code for the Linux kernel [here](https://thirdpartysource.microsoft.com/download/Windows%20Subsystem%20for%20Linux%20v2/May%202019/WSLv2-Linux-Kernel-master.zip).</span></span> <span data-ttu-id="efcbf-114">如果您想要深入了解您可以看看此核心[此部落格文章](https://devblogs.microsoft.com/commandline/shipping-a-linux-kernel-with-windows/)內建的小組所撰寫。</span><span class="sxs-lookup"><span data-stu-id="efcbf-114">If you’d like to read more about this kernel you can check out [this blog post](https://devblogs.microsoft.com/commandline/shipping-a-linux-kernel-with-windows/) written by the team that built it.</span></span>

## <a name="brief-overview-of-the-wsl-2-architecture"></a><span data-ttu-id="efcbf-115">WSL 2 架構的簡要概觀</span><span class="sxs-lookup"><span data-stu-id="efcbf-115">Brief overview of the WSL 2 architecture</span></span>

<span data-ttu-id="efcbf-116">WSL 2 會使用最新及最佳虛擬化技術執行其輕量級的公用程式的虛擬機器 (VM) 內的 Linux 核心。</span><span class="sxs-lookup"><span data-stu-id="efcbf-116">WSL 2 uses the latest and greatest in virtualization technology to run its Linux kernel inside of a lightweight utility virtual machine (VM).</span></span> <span data-ttu-id="efcbf-117">不過，WSL 2 不會有傳統 VM 經驗。</span><span class="sxs-lookup"><span data-stu-id="efcbf-117">However, WSL 2 will NOT be a traditional VM experience.</span></span> <span data-ttu-id="efcbf-118">傳統 VM 經驗可能會慢啟動、 隔離、 耗用大量資源，和需要您的時間來管理它。</span><span class="sxs-lookup"><span data-stu-id="efcbf-118">A traditional VM experience can be slow to boot up, is isolated, consumes lots of resources, and requires your time to manage it.</span></span> <span data-ttu-id="efcbf-119">WSL 2 並沒有這些屬性。</span><span class="sxs-lookup"><span data-stu-id="efcbf-119">WSL 2 does not have these attributes.</span></span> <span data-ttu-id="efcbf-120">它仍然會提供引人注目的 WSL 1 優點：任何 VM 組態或管理需要高層級的 Windows 和 Linux、 極快速的開機時間、 小型資源使用量及最棒的是之間的整合。</span><span class="sxs-lookup"><span data-stu-id="efcbf-120">It will still give the remarkable benefits of WSL 1: High levels of integration between Windows and Linux, extremely fast boot times, small resource footprint, and best of all will require no VM configuration or management.</span></span> <span data-ttu-id="efcbf-121">雖然 WSL 2 會使用 VM，它會管理並讓您利用相同的使用者體驗為 WSL 1 在幕後執行。</span><span class="sxs-lookup"><span data-stu-id="efcbf-121">While WSL 2 does use a VM, it will be managed and run behind the scenes leaving you with the same user experience as WSL 1.</span></span>

## <a name="increased-file-io-performance"></a><span data-ttu-id="efcbf-122">增加的檔案的 IO 效能</span><span class="sxs-lookup"><span data-stu-id="efcbf-122">Increased file IO performance</span></span>

<span data-ttu-id="efcbf-123">檔案的大量作業，例如 git 複製，npm 安裝、 apt 更新、 apt 的升級和更多功能會明顯更快。</span><span class="sxs-lookup"><span data-stu-id="efcbf-123">File intensive operations like git clone, npm install, apt update, apt upgrade, and more will all be noticeably faster.</span></span> <span data-ttu-id="efcbf-124">實際的速度增加取決於哪一個應用程式上正在執行，且它與檔案系統的互動方式。</span><span class="sxs-lookup"><span data-stu-id="efcbf-124">The actual speed increase will depend on which app you’re running and how it is interacting with the file system.</span></span> <span data-ttu-id="efcbf-125">初始版本 WSL 2 執行最多 20 個 x 速度比 WSL 1，當解壓縮壓縮的 tarball，以及各種專案使用 git 複製、 npm 安裝和 cmake 時更快 2-5 倍。</span><span class="sxs-lookup"><span data-stu-id="efcbf-125">Initial versions of WSL 2 run up to 20x faster compared to WSL 1 when unpacking a zipped tarball, and around 2-5x faster when using git clone, npm install and cmake on various projects.</span></span>

## <a name="full-system-call-compatibility"></a><span data-ttu-id="efcbf-126">完整的系統呼叫相容性</span><span class="sxs-lookup"><span data-stu-id="efcbf-126">Full System Call Compatibility</span></span>

<span data-ttu-id="efcbf-127">Linux 的二進位檔會使用系統呼叫來執行許多功能，例如存取檔案、 要求的記憶體、 建立處理序等等。</span><span class="sxs-lookup"><span data-stu-id="efcbf-127">Linux binaries use system calls to perform many functions such as accessing files, requesting memory, creating processes, and more.</span></span> <span data-ttu-id="efcbf-128">但是 WSL 1 使用的轉譯層 WSL 小組所建置，WSL 2 會包含它自己的 Linux 核心完整的系統呼叫相容性。</span><span class="sxs-lookup"><span data-stu-id="efcbf-128">Whereas WSL 1 used a translation layer that was built by the WSL team, WSL 2 includes its own Linux kernel with full system call compatibility.</span></span> <span data-ttu-id="efcbf-129">這引進了一組全新的應用程式，您可以執行在 WSL，例如 Docker 和更多功能。</span><span class="sxs-lookup"><span data-stu-id="efcbf-129">This introduces a whole new set of apps that you can run inside of WSL, such as Docker and more.</span></span> <span data-ttu-id="efcbf-130">此外，任何 Linux 核心的更新可能立即新增到您的電腦，而不是等待 WSL 小組来實作變更，然後再加以新增。</span><span class="sxs-lookup"><span data-stu-id="efcbf-130">Additionally, any updates to the Linux kernel can be immediately ready to be added to your computer, rather than waiting for the WSL team to implement the changes and then have them added.</span></span>